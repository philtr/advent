X=40;R=(1..240).reduce([[1,1],"",[0],0]){|(c,s,a,k),i|m=(c[i]+1)%X
s<<(((m-1)..(m+1)).cover?(i%X)??▓:?░)
i%X>0||s<<"\n"
a!=[]||a=[0,$<.gets[/-?\d+/].to_i]|[]
c[i+1]=c[i]+a.pop
(i+20)%X<1&&k+=c[i]*i
[c,s,a,k]}
puts(R[3],R[1])
